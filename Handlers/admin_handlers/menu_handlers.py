from aiogram import types, F, Router
from aiogram.filters import Command
from aiogram.fsm.state import StatesGroup, State
from aiogram.fsm.state import StatesGroup, State
from aiogram.fsm.context import FSMContext


from Database.Admin_db import Database


from Keyboards.admin_keyboards.menu_keyboards import(
    menu_admin_kb,
    products_kb,
)



db = Database()
router = Router()


@router.message(Command('admin'))
async def cmd_admin(msg: types.Message, state: FSMContext):
    bot_username = await msg.bot.get_me()

    caption = '''
<b>üîß –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å –ë–æ—Ç–∞</b>


üõç <b>–î–æ–±–∞–≤–ª—è–π —Ç–æ–≤–∞—Ä—ã:</b> –£–ø—Ä–∞–≤–ª—è–π—Ç–µ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–æ–º –≤–∞—à–µ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞.

üí≥ <b>–î–æ–±–∞–≤–ª—è–π —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã:</b> –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ —É–¥–æ–±–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–ø–ª–∞—Ç—ã –¥–ª—è –≤–∞—à–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.

üìä <b>–°–º–æ—Ç—Ä–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:</b> –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

‚úâÔ∏è <b>–î–µ–ª–∞–π —Ä–∞—Å—Å—ã–ª–∫—É:</b> –û–ø–æ–≤–µ—â–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ –Ω–æ–≤–∏–Ω–∫–∞—Ö –∏ –∞–∫—Ü–∏—è—Ö.

üé® <b>–û—Ñ–æ—Ä–º–∏ –¥–∏–∑–∞–π–Ω –±–æ—Ç–∞:</b> –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ –∏ —Å—Ç–∏–ª—å –≤–∞—à–µ–≥–æ –±–æ—Ç–∞.
'''
    
    if msg.from_user.id == db.check_user_id_admin(bot_username=bot_username.username):
        await msg.answer(text=caption, reply_markup=menu_admin_kb())

    current_state = await state.get_state()

    if current_state is None:
        return
        
    await state.clear()

    

@router.callback_query(F.data == 'main_menu_admin')
async def call_main_menu_admin(call: types.CallbackQuery, state: FSMContext):
    bot_username = await call.bot.get_me()

    caption = '''
<b>üîß –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å –ë–æ—Ç–∞</b>


üõç <b>–î–æ–±–∞–≤–ª—è–π —Ç–æ–≤–∞—Ä—ã:</b> –£–ø—Ä–∞–≤–ª—è–π—Ç–µ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–æ–º –≤–∞—à–µ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞.

üí≥ <b>–î–æ–±–∞–≤–ª—è–π —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã:</b> –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ —É–¥–æ–±–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–ø–ª–∞—Ç—ã –¥–ª—è –≤–∞—à–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.

üìä <b>–°–º–æ—Ç—Ä–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:</b> –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

‚úâÔ∏è <b>–î–µ–ª–∞–π —Ä–∞—Å—Å—ã–ª–∫—É:</b> –û–ø–æ–≤–µ—â–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ –Ω–æ–≤–∏–Ω–∫–∞—Ö –∏ –∞–∫—Ü–∏—è—Ö.

üé® <b>–û—Ñ–æ—Ä–º–∏ –¥–∏–∑–∞–π–Ω –±–æ—Ç–∞:</b> –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ –∏ —Å—Ç–∏–ª—å –≤–∞—à–µ–≥–æ –±–æ—Ç–∞.
'''
    
    if call.from_user.id == db.check_user_id_admin(bot_username=bot_username.username):
        await call.message.edit_text(text=caption, reply_markup=menu_admin_kb())


    current_state = await state.get_state()

    if current_state is None:
        return
        
    await state.clear()



# –†–ê–ó–î–ï–õ –¢–û–í–ê–†–´ ----------------------------------------

class AddResource(StatesGroup):
    add_resource = State()

@router.callback_query(F.data == 'products')
async def call_products(call: types.CallbackQuery):
    caption = '''
<b>üõç –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¢–æ–≤–∞—Ä–æ–≤</b>

–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å —Ç–æ–≤–∞—Ä—ã —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤:

<b>1. –ü–ª–∞—Ç–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª üìÖ</b>
<blockquote>–ü—Ä–µ–¥–ª–∞–≥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏ —á–µ—Ä–µ–∑ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –≤–∞—à –∫–∞–Ω–∞–ª.</blockquote>

<b>2. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã üìö</b>
<blockquote>–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏, –∫–ª—é—á–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∏ –¥—Ä—É–≥–∏–µ —Ü–∏—Ñ—Ä–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã.</blockquote>

<b>3. –§–∏–∑–∏—á–µ—Å–∫–∏–µ —Ç–æ–≤–∞—Ä—ã üì¶</b>
<blockquote>–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø—Ä–æ–¥–∞–∂–µ–π —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ —Å —É–¥–æ–±–Ω—ã–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞.</blockquote>

<b>üõç –í–∏—Ç—Ä–∏–Ω–∞</b>
<blockquote><i>–í —Ä–∞–∑–¥–µ–ª–µ "–í–∏—Ç—Ä–∏–Ω–∞" –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞–∑–º–µ—â–∞—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –Ω–∞ –≤–∏—Ç—Ä–∏–Ω–µ –ø—Ä–æ–¥–∞–∂. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –≤–∞—à–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ –ø—Ä–∏–æ–±—Ä–µ—Ç–∞—Ç—å —Ç–æ–≤–∞—Ä—ã –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ –±–æ—Ç–∞.</i>

<b>- - –î–æ–±–∞–≤–ª—è–π—Ç–µ —Ç–æ–≤–∞—Ä—ã –Ω–∞ –≤–∏—Ç—Ä–∏–Ω—É:</b> <i>–°–¥–µ–ª–∞–π—Ç–µ –≤–∞—à–∏ —Ç–æ–≤–∞—Ä—ã –≤–∏–¥–∏–º—ã–º–∏ –¥–ª—è –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π.</i>
<b>- - –£–ø—Ä–∞–≤–ª—è–π—Ç–µ –≤–∏—Ç—Ä–∏–Ω–æ–π:</b> <i>–õ–µ–≥–∫–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∏ –æ—Ä–≥–∞–Ω–∏–∑—É–π—Ç–µ —Ç–æ–≤–∞—Ä—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.</i></blockquote> 
'''

    await call.message.edit_text(
        text=caption, 
        reply_markup=products_kb().as_markup()
    )
    


